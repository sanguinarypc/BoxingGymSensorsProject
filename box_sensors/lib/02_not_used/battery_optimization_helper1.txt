import 'package:flutter/foundation.dart';
import 'package:flutter/services.dart';

class BatteryOptimizationHelper {
  static const MethodChannel _channel =
      MethodChannel('com.sanguinarypc.box_sensors/battery');

  static Future<void> requestIgnoreBatteryOptimizations() async {
    try {
      await _channel.invokeMethod('requestIgnoreBatteryOptimizations');
    } on PlatformException catch (e) {
      debugPrint("Error: ${e.message}");
    }
  }
}



// battery_optimization_helper.dart
// import 'package:android_intent_plus/android_intent.dart';
// import 'package:android_intent_plus/flag.dart';
// import 'package:flutter/foundation.dart';
// import 'package:package_info_plus/package_info_plus.dart';

// Future<void> openBatteryOptimizationSettings() async {
//   final PackageInfo packageInfo = await PackageInfo.fromPlatform();
//   final String packageName = packageInfo.packageName;
//   debugPrint("Launching battery optimization settings for package: $packageName");

//   final AndroidIntent intent = AndroidIntent(
//     action: 'android.settings.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS',
//     data: 'package:$packageName',
//     flags: <int>[Flag.FLAG_ACTIVITY_NEW_TASK],
//   );
//   await intent.launch();
//   debugPrint("Battery optimization settings intent launched");
// }
